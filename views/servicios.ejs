<!DOCTYPE html>
<html>
<head>
  <!--META-->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Este es el homepage de Auto Servicios 2016 C.A.">
    <meta name="author" content="Reynaldo Quintero y Asher Kleiman">
  <!--TITLE-->
    <title>Auto Servicios 2016 C.A.</title>
  <!--STYLES-->
    <style>
    </style>

  <style>
  .demo-card-wide.mdl-card {
    width: 33%;
    margin-right: 3px;
  }
  .demo-card-wide > .mdl-card__title {
    color: #fff;
    height: 400px;
    
  }
  .demo-card-wide > .mdl-card__menu {
    color: #fff;
  }
  </style>

    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-red.min.css"> <!--Material Design-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> <!--Material Design-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous"> <!--Bootstrap-->


    
</head>
<body>
<!-- Uses a header that scrolls with the text, rather than staying
  locked at the top -->
<div class="mdl-layout mdl-js-layout">
  <header class="mdl-layout__header mdl-layout__header--scroll">
    <div class="mdl-layout__header-row">
      <!-- Title -->
      <span class="mdl-layout-title">Home</span>
      <!-- Add spacer, to align navigation to the right -->
      <div class="mdl-layout-spacer"></div>
      <!-- Navigation -->
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="/">Home</a>
        <a class="mdl-navigation__link" href="/dashboard">Dashboard</a>
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">Home</span>
    <nav class="mdl-navigation">
      <a class="mdl-navigation__link" href="/">Home</a>
      <a class="mdl-navigation__link" href="/dashboard">Dashboard</a>
    </nav>
  </div>
  <main class="mdl-layout__content">
    <div class="page-content" align="center"><!-- Your content goes here -->
      <br>
      <h1>Servicios Disponibles</h1>
      <p>Seleccione los servicios a realizar para el vehiculo de placa <%= data[0].placa %></p>
      <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" id="table" style="width: 30%;">
      <thead align="center">
        <tr><th class="mdl-data-table__cell--non-numeric">ID</th><th class="mdl-data-table__cell--non-numeric">Descripcion</th><th>Costo</th><th></th></tr>
      </thead>
      <tbody>

        <% data.forEach( function(servicio){ %>
        <tr><td class="mdl-data-table__cell--non-numeric"><%= servicio.id %></td><td class="mdl-data-table__cell--non-numeric nr"><%= servicio.nombre %></td><td><%= servicio.costo %></td><td><button type="button" class="use-address" /></td></tr> 
        <% }); %>

      </tbody>
      </table>
      <br>
      <div>
      <p>Indique el ID del servicio que desea realizar:</p>
        <form action="/agregarservicio" method="POST">
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" name="servicio" required>
            <label class="mdl-textfield__label" for="servicio">Servicio</label>
          </div>
            <br>
          <input type="hidden" name="placa" id="objeto" value="<%= data[0].placa %>">
          <input class="mdl-button mdl-js-button mdl-button--raised" type="submit" value="Agregar Servicios">
        </form>
      </div>

      <br>
      <div align="center">
        <a href="/menu-admin"><button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">Finalizar</button></a>
      </div>
      <br>
      <br>
      <a href="/menu-admin"><button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent">Volver</button></a>
    </div>
  </main>
</div>


<!-- SCRIPTS -->
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script> <!--Material Design-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <!--JQuery-->
  <script>
    $(document).ready(function(){
      $(".use-address").click(function(){
          console.log('hola');
          var $row = $(this).closest("tr");    // Find the row
          var $text = $row.find(".nr").text(); // Find the text

          $.post('/agregarservicio',
          {
            placa: data[0].placa,
            servicio: $text
          },
          function(data,status){
            alert("Data: " + data + "\nStatus: " + status);
          });
      });
    });
  </script>



</body>
</html>




<!-- 
    $(".use-address").click(function() {
      var $row = $(this).closest("tr");    // Find the row
      var $text = $row.find(".nr").text(); // Find the text

      // Let's test it out
      alert($text);
}); -->